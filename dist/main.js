(()=>{"use strict";const e=document.querySelector(".popup_type_image-container"),t=document.querySelector(".popup__place-name"),s=document.querySelector(".popup__image-link");function r(e){document.addEventListener("keydown",n),e.classList.add("popup_opened")}function n(e){"Escape"===e.key&&o(document.querySelector(".popup_opened"))}function o(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",n)}class i{constructor(e,t){this._data=e,this._template=document.querySelector(t).content.querySelector(".element")}_openPopupImage(e){t.textContent=this._cardTitle.textContent,s.src=this._cardImage.src,s.alt=this._data.name,r(e)}_deleteHandler(){this._cardElement.remove()}_setEventListeners(){this._deleteButton.addEventListener("click",(()=>this._deleteHandler())),this._likeButton.addEventListener("click",this._likeClickHandler),this._viewCardButton.addEventListener("click",(()=>this._openPopupImage(e)))}_likeClickHandler(){this.classList.toggle("element__group-heart_active")}createCard(){return this._element=this._template.querySelector(".element"),this._cardElement=this._template.cloneNode(!0),this._cardImage=this._cardElement.querySelector(".element__image"),this._cardTitle=this._cardElement.querySelector(".element__group-title"),this._viewCardButton=this._cardElement.querySelector(".element__view-button"),this._cardTitle.textContent=this._data.name,this._cardImage.src=`${this._data.link}`,this._cardImage.alt=this._data.name,this._deleteButton=this._cardElement.querySelector(".element__delete-button"),this._likeButton=this._cardElement.querySelector(".element__group-heart"),this._setEventListeners(),this._cardElement}}class a{constructor(e,t){this._form=t,this._settings=e,this._inputErrorClass=e.inputErrorClass,this._errorVisibleClass=e.errorVisibleClass,this._inactiveButtonClass=e.inactiveButtonClass,this._submitButton=t.querySelector(e.buttonSelector),this._inputList=t.querySelectorAll(this._settings.inputSelector)}_showError(e,t){e.classList.add(this._inputErrorClass),t.classList.add(this._errorVisibleClass),t.textContent=e.validationMessage}_hideError(e,t){e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorVisibleClass),t.textContent=""}_toggleButton(){this._form.checkValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled")):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled",""))}_validateInput(e){const t=this._form.querySelector(`#error-${e.id}`);e.validity.valid?this._hideError(e,t):this._showError(e,t),this._toggleButton()}_submitForm(e){e.preventDefault()}enableValidation(){this._form.addEventListener("submit",this._submitForm),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._validateInput(e)}))})),this._toggleButton()}}const l=document.querySelector(".popup_type_edit"),c=document.querySelector(".popup_type_add-card"),u=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),d=l.querySelector(".popup__form"),_=c.querySelector(".popup__form");function m(e){const t=e.querySelector(".popup__button-save");t.classList.add("popup__button-save_disabled"),t.setAttribute("disabled","")}_.addEventListener("submit",(e=>{e.preventDefault();const t=f.value,s=S.value;_.reset(),g({name:t,link:s}),m(_),o(c)})),d.addEventListener("submit",(e=>{e.preventDefault(),h.textContent=y.value,v.textContent=b.value,m(d),o(l)}));const h=document.querySelector(".profile__name"),v=document.querySelector(".profile__job"),y=document.querySelector(".popup__input_type_name"),b=document.querySelector(".popup__input_type_job"),f=document.querySelector(".popup__input_type_card-name"),S=document.querySelector(".popup__input_card-link");document.querySelectorAll(".popup").forEach((e=>{e.addEventListener("click",(t=>{t.target.classList.contains("popup_opened")&&o(e),t.target.classList.contains("popup__close")&&o(e)}))})),u.addEventListener("click",(()=>function(e){y.value=h.textContent,b.value=v.textContent,r(e)}(l))),p.addEventListener("click",(()=>r(c)));const E=document.querySelector(".elements");function g(e){const t=new i(e,".card-template").createCard();E.prepend(t)}const k={formSelector:".popup__form",inputSelector:".popup__input",errorSelector:".error-message",buttonSelector:".popup__button-save",inputErrorClass:"popup__input-error",errorVisibleClass:"error-message_visible",inactiveButtonClass:"popup__button-save_disabled"};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Санкт-Петербург",link:"https://images.unsplash.com/photo-1630354102354-2471c8851e60?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach(g);const q=new a(k,d),C=new a(k,_);q.enableValidation(),C.enableValidation()})();